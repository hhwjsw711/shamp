# Netlify configuration for TanStack Start
# This file should be in the repo root (shamp/)
[build]
  base = "frotend"
  command = "npm run build"
  publish = "frotend/dist/client"
  
[build.environment]
  NODE_VERSION = "22.12.0"
  # Allow VITE_ prefixed env vars in build output (they're meant to be public/client-side)
  # These are intentionally bundled into the client code by Vite
  # SECRETS_SCAN_OMIT_KEYS must be set for all contexts for secrets scanner
  SECRETS_SCAN_OMIT_KEYS = "VITE_CONVEX_SITE_URL,VITE_GOOGLE_MAPS_API_KEY,VITE_CONVEX_URL"
  
# Set SECRETS_SCAN_OMIT_KEYS for all deployment contexts
[context.production.environment]
  SECRETS_SCAN_OMIT_KEYS = "VITE_CONVEX_SITE_URL,VITE_GOOGLE_MAPS_API_KEY,VITE_CONVEX_URL"
  
[context.deploy-preview.environment]
  SECRETS_SCAN_OMIT_KEYS = "VITE_CONVEX_SITE_URL,VITE_GOOGLE_MAPS_API_KEY,VITE_CONVEX_URL"
  
[context.branch-deploy.environment]
  SECRETS_SCAN_OMIT_KEYS = "VITE_CONVEX_SITE_URL,VITE_GOOGLE_MAPS_API_KEY,VITE_CONVEX_URL"



